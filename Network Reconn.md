# Day 5 NETWORK RECONNAISSANCE

## RECONNAISSANCE
- Active - comprehensive report of possible open or closed ports at the time of the scan
  - External (Ping scans, NMAP scans, Port Scans, OS Identification)
  - Internal (DNS Queries, ARP Requests, Ping Scans, Port Scans, Network Scanning)
- Passive - identifies network services by observing traffic generated by servers and hosts as it passes an observation point
  - External (DNS Lookups (DIG), Whois, Job site listings, Shodan)
  - Internal (Packet Sniffing, ARP Cache, IP Address, Running Services, Open Ports)
![image](https://github.com/TJClarke58/Networking.md/assets/140441047/cda901ba-6e8b-4a9a-9792-1e519f751f88)

## PASSIVE RECONNAISSANCE
- Gathering information about targets without direct interaction
- Not as straight forward and requires more time than active reconnaissance
- Lower risk of discovery
- Involves identifying:
  - IP addresses and Sub-Domains
  - External and 3rd party sites
  - People and Technologies
  - Content of Interest
  - Vulnerabilities
- Possible tools for gathering:
  - WHOIS queries
  - Job site listings
  - Phone Numbers
  - Google searches
  - Passive OS fingerprinting
 
## PASSIVE EXTERNAL NETWORK RECONNAISSANCE
- Information gathered outside of the network using passive methods
- Allows for more efficient attacks and plans

## PASSIVE EXTERNAL NETWORK RECONNAISSANCE: DNS
- Resolves hostnames to IP addresses
- RFC 3912
- WHOIS queries

## PASSIVE EXTERNAL NETWORK RECONNAISSANCE: DIG
- Typically between primary and secondary DNS servers
- If allowed to transfer externally hostnames, IPs, and IP blocks can be determined
```
instructor@net1:~$ dig ccboe.net
instructor@net1:~$ dig ccboe.net MX
instructor@net1:~$ dig ccboe.net SOA
instructor@net1:~$ dig ccboe.net TXT
```

## PASSIVE EXTERNAL NETWORK RECONNAISSANCE: ZONE TRANSFERS
- Returns DNS information
- Supplements base queries
```
instructor@net1:~$ dig axfr @nsztm1.digi.ninja zonetransfer.me
```

## PASSIVE EXTERNAL NETWORK RECONNAISSANCE: HOST HISTORY
- netcraft
- wayback machine

## PASSIVE EXTERNAL NETWORK RECONNAISSANCE: GOOGLE SEARCHES
- subdomains
- technologies
```
*ccboe.net -site:*.ccboe.net
```
```
site:*.ccboe.net "Powered by"
```

## PASSIVE EXTERNAL NETWORK RECONNAISSANCE: SHODAN
- Reveals information about technologies, remote access services, improperly configured services, and network infrastructure.
- When selected can give additional information and applicable vulnerabilities
![image](https://github.com/TJClarke58/Networking.md/assets/140441047/42574f70-3175-474a-9963-fd875096b3fe)

## NETWORK SCANNING
- Scanning Strategy
  - Remote to Local
  - Local to Remote
  - Local to Local
  - Remote to Remote
- Scanning Approach
  - Aim
    - Wide range target scan
    - Target specific scan
  - Method
    - Single source scan
    - Distributed scan
- Broadcast Ping and Ping sweep
- ARP scan
- SYN scan
- Full connect scan
- Null scan
- FIN scan
- XMAS tree scan
- UDP scan
- Idle scan
- ACK/Window scan
- RPC scan
- FTP scan
- decoy scan
- OS fingerprinting scan
- version scan
- Protocol ping
- Discovery probes
- SCTP INIT scan

## NETWORK SCANNING - CODE
```
nmap [Options] [Target IP/ Subnet]
nc [Options] [Target IP] [Target Port]
```

## NETWORK MAPPING
![image](https://github.com/TJClarke58/Networking.md/assets/140441047/9be8d089-e370-4acb-9840-a7038bdfd68b)
